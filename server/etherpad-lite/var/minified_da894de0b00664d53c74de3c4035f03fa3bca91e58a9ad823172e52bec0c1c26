(function(e,o,c,u){e.fn.extend({dropdown_menu(d){const f={sub_indicator_class:"dropdown-menu-sub-indicator",vertical_class:"dropdown-menu-vertical",shadow_class:"dropdown-menu-shadow",hover_class:"dropdown-menu-hover",open_delay:150,close_delay:300,animation_open:{opacity:"show"},speed_open:"fast",animation_close:{opacity:"hide"},speed_close:"fast",sub_indicators:!1,drop_shadows:!1,vertical:!1,viewport_overflow:"auto",init(){}};version=parseFloat(navigator.appVersion.split("MSIE")[1]);const r=version<8&&c.body.filters;return this.each(function(){const i=e(this),h=i.data("options"),s=e.extend({},f,d,h),p=e(`<span class="${s.sub_indicator_class}">&#187;</span>`);s.vertical&&i.addClass(s.vertical_class),e(">li",i).css({"font-size":i.css("font-size")}),i.css({"font-size":"0"}),i.find("li:has(ul)").each(function(){e(this).addClass(s.sub_indicator_class),s.sub_indicators&&e(">a:first-child",this).append(p.clone());const t=e(">ul",this).css({visibility:"hidden",display:"block"});s.drop_shadows&&t.addClass(s.shadow_class),r&&setTimeout(()=>{t.css({width:t.width()})},0),e(this).on({mouseenter(l){const a=e(l.fromElement).parent().parent().attr("class");if(a&&a.indexOf("toolbar")==-1)return!1;clearTimeout(e(this).data("close_timer")),clearTimeout(e(this).data("open_timer")),!e(this).hasClass(s.hover_class)&&e(this).data("open_timer",setTimeout(e.proxy(function(){if(e(this).addClass(s.hover_class),s.vertical?t.css({top:0,left:e(this).width()}):t.css({top:"",left:""}),t.css({visibility:"hidden",display:"block"}),overflow_x=t.offset().left+t.width()>e(o).scrollLeft()+e(o).width(),overflow_y=t.offset().top+t.height()>e(o).scrollTop()+e(o).height(),overflow=overflow_x||overflow_y,overflow&&s.viewport_overflow)switch(s.viewport_overflow==="auto"&&(s.viewport_overflow=r?"scroll":"move"),s.viewport_overflow){case"move":var _=overflow_x?e(o).scrollLeft()+e(o).width()-t.width()-10:t.offset().left,v=overflow_y?e(o).scrollTop()+e(o).height()-t.height()-10:t.offset().top;t.offset({left:_,top:v});break;case"scroll":if(overflow_x){const n=t.offset().left-e(o).width()+t.width()+10;e("html").animate({scrollLeft:n},"fast")}if(overflow_y){const n=t.offset().top-e(o).height()+t.height()+10;e("html").animate({scrollTop:n},"fast")}break}t.hide().css({visibility:"visible"}),s.animation_open?t.animate(s.animation_open,s.speed_open):t.show()},this),s.open_delay))},mouseleave(l){clearTimeout(e(this).data("close_timer")),clearTimeout(e(this).data("open_timer")),e(this).data("close_timer",setTimeout(e.proxy(function(){e(this).removeClass(s.hover_class),s.animation_close?t.animate(s.animation_close,s.speed_close,()=>{t.css({visibility:"hidden"})}):t.hide().css({visibility:"hidden"})},this),s.close_delay))},touchstart(l){e(">a:first-child",this).one("click",e.proxy(function(a){if(!e(this).hasClass(s.hover_class))a.preventDefault();else return!0},this))}})}),setTimeout(()=>{e("ul",i).hide(1).promise().done(()=>{s.init.call(i[0])})},0)})}})})(jQuery,window,document);
