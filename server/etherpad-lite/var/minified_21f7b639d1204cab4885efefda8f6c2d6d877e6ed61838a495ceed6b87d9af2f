require.define({"ep_align/static/js/index.js": {"(module ep_align/static/js/index.js)": function (require, exports, module) {"use strict";const tags=["left","center","justify","right"],range=(r,t)=>Array.from(Array(Math.abs(t-r)+1),(e,s)=>r+s);exports.aceRegisterBlockElements=()=>tags,exports.postAceInit=(r,t)=>{$("body").on("click",".ep_align",function(){const e=$(this).data("align"),s=parseInt(e,10);isNaN(s)||t.ace.callWithAce(n=>{n.ace_doInsertAlign(s)},"insertalign",!0)})},exports.aceEditEvent=(r,t)=>{const e=t.callstack;return e.type!=="handleClick"&&e.type!=="handleKeyEvent"&&!e.docTextChanged||e.type==="setBaseText"||e.type==="setup"?!1:setTimeout(()=>{const s=t.documentAttributeManager,n=t.rep,i={},a=n.selStart[0],c=Math.max(a,n.selEnd[0]-(n.selEnd[1]===0?1:0));let u=0;range(a,c+1).forEach(l=>{u++;const o=s.getAttributeOnLine(l,"align");i[o]?i[o].count++:(i[o]={},i[o].count=1)}),$.each(i,(l,o)=>{o.count})},250)},exports.aceAttribsToClasses=(r,t)=>{if(t.key==="align")return[`align:${t.value}`]},exports.aceDomLineProcessLineAttributes=(r,t)=>{const e=t.cls,s=/(?:^| )align:([A-Za-z0-9]*)/.exec(e);let n;if(s&&(n=tags.indexOf(s[1])),n!==void 0&&n>=0){const i=tags[n],a=`width:100%;margin:0 auto;list-style-position:inside;display:block;text-align:${i}`;return[{preHtml:`<${i} style="${a}">`,postHtml:`</${i}>`,processedMarker:!0}]}return[]},exports.aceInitialized=(r,t)=>{function e(n){const i=this.rep,a=this.documentAttributeManager;if(!(i.selStart&&i.selEnd)||n>=0&&tags[n]===void 0)return;const c=i.selStart[0],u=Math.max(c,i.selEnd[0]-(i.selEnd[1]===0?1:0));range(c,u).forEach(l=>{n>=0?a.setAttributeOnLine(l,"align",tags[n]):a.removeAttributeOnLine(l,"align")})}const s=t.editorInfo;s.ace_doInsertAlign=e.bind(t)};const align=(r,t)=>{r.ace.callWithAce(e=>{e.ace_doInsertAlign(t),e.ace_focus()},"insertalign",!0)};exports.postToolbarInit=(r,t)=>{const e=t.toolbar;return e.registerCommand("alignLeft",()=>{align(t,0)}),e.registerCommand("alignCenter",()=>{align(t,1)}),e.registerCommand("alignJustify",()=>{align(t,2)}),e.registerCommand("alignRight",()=>{align(t,3)}),!0};
}}["(module ep_align/static/js/index.js)"],
});
