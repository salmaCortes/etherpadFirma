require.define({"ep_comments_page/static/js/preCommentMark.js": {"(module ep_comments_page/static/js/preCommentMark.js)": function (require, exports, module) {"use strict";exports.MARK_CLASS="pre-selected-comment";const PreCommentMarker=function(e){this.ace=e;const t=this;this.highlightSelectedText()&&setTimeout(()=>{t.unmarkSelectedText()},0)};PreCommentMarker.prototype.highlightSelectedText=function(){return clientVars.highlightSelectedText},PreCommentMarker.prototype.markSelectedText=function(){this.highlightSelectedText()&&this.ace.callWithAce(doNothing,"markPreSelectedTextToComment",!0)},PreCommentMarker.prototype.unmarkSelectedText=function(){this.highlightSelectedText()&&this.ace.callWithAce(doNothing,"unmarkPreSelectedTextToComment",!0)},PreCommentMarker.prototype.performNonUnduableEvent=function(e,t,n){t.startNewEvent("nonundoable"),n(),t.startNewEvent(e)},PreCommentMarker.prototype.handleMarkText=function(e){const t=e.editorInfo,n=e.rep,r=e.callstack;this.removeMarks(t,n,r),this.addMark(t,r)},PreCommentMarker.prototype.handleUnmarkText=function(e){const t=e.editorInfo,n=e.rep,r=e.callstack;this.removeMarks(t,n,r)},PreCommentMarker.prototype.addMark=function(e,t){const n=t.editEvent.eventType;this.performNonUnduableEvent(n,t,()=>{e.ace_setAttributeOnSelection(exports.MARK_CLASS,clientVars.userId)})},PreCommentMarker.prototype.removeMarks=function(e,t,n){const r=n.editEvent.eventType,i=t.selStart,c=t.selEnd;this.performNonUnduableEvent(r,n,()=>{const s=$('iframe[name="ace_outer"]').contents().find('iframe[name="ace_inner"]'),a=`.${exports.MARK_CLASS}`,l=e.ace_getRepFromSelector(a,s);$.each(l,(p,o)=>{e.ace_performSelectionChange(o[0],o[1],!0),e.ace_setAttributeOnSelection(exports.MARK_CLASS,!1)}),e.ace_performSelectionChange(i,c,!0)})};const doNothing=()=>{};exports.init=e=>new PreCommentMarker(e);
}}["(module ep_comments_page/static/js/preCommentMark.js)"],
});
